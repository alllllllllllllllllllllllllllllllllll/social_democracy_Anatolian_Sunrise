title: Modify Production Indices
view-if: 0
on-arrival: {!
// This scene is used by government actions to modify production indices
// Usage: set Q.industrial_change and/or Q.agricultural_change and/or Q.agricultural_consumption_change before calling this scene

// Apply industrial production changes
if (Q.industrial_change && Q.industrial_change !== 0) {
    Q.industry_modifier = (Q.industry_modifier || 0) + Q.industrial_change;
    Q.industrial_player_modifier = Q.industry_modifier;
    // Reset the change variable
    Q.industrial_change = 0;
}

// Apply agricultural production changes
if (Q.agricultural_change && Q.agricultural_change !== 0) {
    Q.agriculture_modifier = (Q.agriculture_modifier || 0) + Q.agricultural_change;
    Q.agricultural_player_modifier = Q.agriculture_modifier;
    // Reset the change variable
    Q.agricultural_change = 0;
}

// Apply agricultural consumption changes
if (Q.agricultural_consumption_change && Q.agricultural_consumption_change !== 0) {
    Q.agricultural_consumption += Q.agricultural_consumption_change;
    
    // Ensure consumption doesn't go below 10 (to prevent division issues)
    if (Q.agricultural_consumption < 10) {
        Q.agricultural_consumption = 10;
    }
    
    // Reset the change variable
    Q.agricultural_consumption_change = 0;
}

// Recalculate production indices without forex pressure impact
var baseIndustry = (typeof Q.base_industry_index === 'number') ? Q.base_industry_index : (Q.historical_industrial_index[Q.year] !== undefined ? Q.historical_industrial_index[Q.year] : 100);
var baseAgriculture = (typeof Q.base_agriculture_index === 'number') ? Q.base_agriculture_index : (Q.historical_agricultural_index[Q.year] !== undefined ? Q.historical_agricultural_index[Q.year] : 100);
Q.industrial_production_index = baseIndustry + (Q.industry_modifier || 0);
Q.agricultural_production_index = baseAgriculture + (Q.agriculture_modifier || 0);
if (Q.industrial_production_index < 0) { Q.industrial_production_index = 0; }
if (Q.agricultural_production_index < 0) { Q.agricultural_production_index = 0; }

// Recalculate Agricultural Product Prices after any changes
Q.agricultural_product_prices = Q.agricultural_production_index / Q.agricultural_consumption;

// Update agricultural price status text
if (Q.agricultural_product_prices > 1.20) {
    Q.agricultural_price_status = "Very High";
} else if (Q.agricultural_product_prices >= 1.10) {
    Q.agricultural_price_status = "High";
} else if (Q.agricultural_product_prices >= 0.90) {
    Q.agricultural_price_status = "Sufficient";
} else if (Q.agricultural_product_prices >= 0.80) {
    Q.agricultural_price_status = "Low";
} else {
    Q.agricultural_price_status = "Very Low";
}
!}

@return
