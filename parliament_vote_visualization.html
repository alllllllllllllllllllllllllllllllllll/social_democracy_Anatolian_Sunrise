<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Parliament Vote Visualization</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="out/html/d3-parliament.js"></script>
  <style>
    #content { width: 100%; max-width: 700px; margin: auto; }
    #reichstag { width: 100%; height: 350px; }
  </style>
</head>
<body>
<div id="content">
  <h2>Parliamentary Vote Visualization</h2>
  <svg id="reichstag"></svg>
</div>
<script>
// Grouped seat data for d3-parliament (as in 1928 election scene)
const data = [
  // All Nay (red) seats first (left)
  { id: 'CHP-Nay', legend: 'CHP (Nay)', name: 'CHP', seats: 48, color: '#c51313' },
  { id: 'TIP-Nay', legend: 'TİP (Nay)', name: 'TİP', seats: 2, color: '#c51313' },
  { id: 'Others-Nay', legend: 'Others (Nay)', name: 'Others', seats: 8, color: '#c51313' },
  // All Aye (green) seats (middle)
  { id: 'CHP-Aye', legend: 'CHP (Aye)', name: 'CHP', seats: 29, color: '#158e33' },
  { id: 'AP-Aye', legend: 'AP (Aye)', name: 'AP', seats: 236, color: '#158e33' },
  { id: 'CGP-Aye', legend: 'CGP (Aye)', name: 'CGP', seats: 15, color: '#158e33' },
  { id: 'Others-Aye', legend: 'Others (Aye)', name: 'Others', seats: 24, color: '#158e33' },
  { id: 'MHP-Aye', legend: 'MHP (Aye)', name: 'MHP', seats: 1, color: '#158e33' },
  // All Absent (grey) seats last (right)
  { id: 'CHP-Absent', legend: 'CHP (Absent)', name: 'CHP', seats: 66, color: '#9e9e9e' },
  { id: 'AP-Absent', legend: 'AP (Absent)', name: 'AP', seats: 20, color: '#9e9e9e' }
];

// Pad to 450 seats if needed
let totalSeats = data.reduce((sum, d) => sum + d.seats, 0);
if (totalSeats < 450) {
  data.push({ id: 'Others-Aye2', legend: 'Others (Aye)', name: 'Others', seats: 450 - totalSeats, color: '#158e33' });
}

var width = 500;
var height = 350;
var screenWidth = document.getElementById('content').offsetWidth;
if (screenWidth < width - 50) {
  width = screenWidth - 50;
  height = width * 0.7;
  document.getElementById("reichstag").style.height = height + "px";
}

if (window && d3) {
  var parliament = d3.parliament();
  parliament.width(width).height(height).innerRadiusCoef(0.4);
  parliament.enter.fromCenter(true).smallToBig(true);
  parliament.exit.toCenter(false).bigToSmall(true);
  d3.select("#reichstag").datum(data).call(parliament);
}
</script>
</body>
</html>
